$(document).ready(function(){function e(e,n){var a={};let o=e["name-0"];for(i=0;i<e.guests;i++){let r=e[`name-${i}`];"Your plus one"===r&&(r=`${o}'s +1`),a[r]={preparty:"on"===e[`preparty-${i}`]?"yes":"no",wedding:"on"===e[`wedding-${i}`]?"yes":"no",afterParty:"on"===e[`afterparty-${i}`]?"yes":"no",brunch:"on"===e[`brunch-${i}`]?"yes":"no",meal:n[`meal-${i}`]||"",diet:n.diet||""}}return a}$("#password-form").submit(function(e){$(this).hide(),e.preventDefault(),$(".spinner").show();var n=$("#password-form").serializeArray().reduce(function(e,n){return e[n.name]=n.value,e},{}).password;$.ajax({url:"https://rocky-waters-77986.herokuapp.com/"+n,method:"GET"}).done(function(e){var a=Object.keys(e);$("#dynamic-form").append(`\n<input type="hidden" name="guests" value=${a.length}>\n<input type="hidden" name="password" value=${n}>\n`),a.forEach(function(e,n){var a=e;"+1"===e&&(a="Your plus one"),$("#dynamic-form").append(`\n<div class="attendance">\n<div class="name">\n${a} will be attending the:\n</div>\n<div class="attendance-boxes">\n<input type="hidden" name="name-${n}" value="${a}">\n<label>\n<input type="checkbox" name="preparty-${n}">\n<span class="label-body">Pre-party</span>\n</label>\n<label>\n<input type="checkbox" name="wedding-${n}">\n<span class="label-body">Wedding</span>\n</label>\n<label>\n<input type="checkbox" name="afterparty-${n}">\n<span class="label-body">After Party</span>\n</label>\n<label>\n<input type="checkbox" name="brunch-${n}">\n<span class="label-body">Brunch</span>\n</label>\n</div>\n</div>\n`)}),$(".password-form").hide(),$(".spinner").hide(),$(".rsvp-form").show()}).fail(function(e){$(".rsvp-form").hide(),$(".spinner").hide(),$(".error").show()})}),$("#rsvp-form").submit(function(n){$(this).hide(),n.preventDefault();var a=$("#rsvp-form").serializeArray().reduce(function(e,n){return e[n.name]=n.value,e},{}),o=!1;for(i=0;i<a.guests;i++)o=!0,"on"===a[`wedding-${i}`]&&$("#dynamic-food-form").append(`\n<div>\n<div class="name">\n${a[`name-${i}`]} will be having the:\n</div>\n<div class="label">\n<label>\n<input type="radio" name="meal-${i}" value="chicken" required>\n<span class="label-body">Pomegranate Glazed Frenched Chicken Breast</span>\n<small class="label-body">vegetable risotto cake, spring vegetables, rosemary pan sauce</small>\n</label>\n<label>\n<input type="radio" name="meal-${i}" value="salmon">\n<span class="label-body">Salmon topped with Roasted Tomato Olive Crumbs</span>\n<small class="label-body">sauteed greens, saffron orzo risotto, roasted tomato sauce</small>\n</label>\n<label>\n<input type="radio" name="meal-${i}" value="tofu">\n<span class="label-body">Panko Tofu "Scallops"</span>\n<small class="label-body">bok choy ponzu</small>\n</label>\n</div>\n</div>\n`);if(o)$("#dynamic-food-form").append('\n<textarea class="u-full-width" placeholder="Please include any dietary restrictions here." name="diet"></textarea>\n'),$(".rsvp-form").hide(),$(".food-form").show();else{const n=e(a,foodData);$(".spinner").show(),$.ajax({type:"POST",url:"https://rocky-waters-77986.herokuapp.com/"+a.password,data:JSON.stringify(n),contentType:"application/json",dataType:"json"}).done(function(){$(".rsvp-form").hide(),$(".spinner").hide(),$(".thank-you").show()}).fail(function(e){$(".rsvp-form").hide(),$(".spinner").hide(),$(".error").show()})}}),$("#food-form").submit(function(n){$(this).hide(),n.preventDefault();var a=$("#rsvp-form").serializeArray().reduce(function(e,n){return e[n.name]=n.value,e},{});const o=e(a,$("#food-form").serializeArray().reduce(function(e,n){return e[n.name]=n.value,e},{}));$(".spinner").show(),$.ajax({type:"POST",url:"https://rocky-waters-77986.herokuapp.com/"+a.password,data:JSON.stringify(o),contentType:"application/json"}).done(function(){$(".food-form").hide(),$(".spinner").hide(),$(".thank-you").show()}).fail(function(e){$(".food-form").hide(),$(".spinner").hide(),$(".error").show()})})});